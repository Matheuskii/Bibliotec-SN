<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - BiblioTec</title>
    <link rel="stylesheet" href="./css/Inicio.css">
    <link rel="stylesheet" href="./css/Admin.css">

    <script>
        // Pega o perfil do usu√°rio logado.
        const perfil = localStorage.getItem("perfilUsuario");
        // Verifica se √© Admin. Se n√£o for, chuta para o login.
        if (!perfil || perfil !== 'Admin') {
            alert("Acesso restrito a Administradores.");
            window.location.href = "Login.html";
        }
    </script>
</head>
<body>
    <div class="admin-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="./images/LogoBibliotec.png" alt="Logo" class="admin-logo">
                <h3>Admin Panel</h3>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-link active" onclick="mostrarSecao('livros')">üìö Livros (RF04)</a>
                <a href="#" class="nav-link" onclick="mostrarSecao('alunos')">üéì Alunos (RF01)</a>
                <a href="#" class="nav-link" onclick="mostrarSecao('reservas')">üìÖ Reservas (RF06)</a>
                <a href="Inicio.html" style="margin-top: 20px;">üè† Ver Site</a>
                <a href="#" id="btnSairAdmin" style="color: #ff6b6b; margin-top: auto;">üö™ Sair</a>
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <h2 id="tituloSecao">Gerenciar Livros</h2>
                <div class="user-info">
                    <span id="adminNome">Administrador</span>
                </div>
            </header>

            <section id="secao-livros" class="content-section">
                <div class="actions-bar">
                    <input type="text" id="buscaLivro" placeholder="Filtrar por nome, categoria ou autor (RN03)..." class="search-admin">
                    <button class="btn-novo" onclick="abrirModalLivro()">+ Novo Livro</button>
                </div>
                <div class="table-responsive">
                    <table class="tabela-admin">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Capa</th>
                                <th>T√≠tulo (RN09)</th>
                                <th>Autor (RN09)</th>
                                <th>Status (RN11)</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="tabelaLivrosBody"></tbody>
                    </table>
                </div>
            </section>

            <section id="secao-alunos" class="content-section" style="display: none;">
                <div class="actions-bar">
                    <input type="text" id="buscaAluno" placeholder="Buscar aluno..." class="search-admin">
                    <button class="btn-novo" onclick="abrirModalAluno()">+ Novo Aluno</button>
                </div>
                <div class="table-responsive">
                    <table class="tabela-admin">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome (RN07)</th>
                                <th>Email (RN07)</th>
                                <th>Curso (RN07)</th>
                                <th>Celular</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="tabelaAlunosBody"></tbody>
                    </table>
                </div>
            </section>

            <section id="secao-reservas" class="content-section" style="display: none;">
                <div class="table-responsive">
                    <table class="tabela-admin">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Aluno</th>
                                <th>Livro</th>
                                <th>Retirada (RN10)</th>
                                <th>Devolu√ß√£o (RN10)</th>
                                <th>Confirmado?</th>
                            </tr>
                        </thead>
                        <tbody id="tabelaReservasBody"></tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

    <div id="modalLivro" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modalTituloLivro">Novo Livro</h3>
            <form id="formLivro">
                <input type="hidden" id="livroId">
                <div class="form-group"><label>T√≠tulo (Nome)*</label><input type="text" id="titulo" required></div>
                <div class="form-row">
                    <div class="form-group"><label>Escritor (Autor)*</label><input type="text" id="autor" required></div>
                    <div class="form-group"><label>Editora</label><input type="text" id="editora"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>Categoria (G√™nero)</label><input type="text" id="genero"></div>
                    <div class="form-group"><label>Idioma</label><input type="text" id="idioma" value="Portugu√™s"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>Ano</label><input type="number" id="ano_publicacao"></div>
                    <div class="form-group"><label>ISBN</label><input type="text" id="isbn"></div>
                </div>
                <div class="form-group"><label>Foto (URL da Capa)</label><input type="text" id="caminho_capa"></div>
                <div class="form-group"><label>Descri√ß√£o (Sinopse)</label><textarea id="sinopse" rows="3"></textarea></div>
                <div class="form-group"><label><input type="checkbox" id="ativo" checked> Livro Ativo (RN11)</label></div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancelar" onclick="fecharModal('modalLivro')">Cancelar</button>
                    <button type="submit" class="btn-salvar">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modalAluno" class="modal-overlay">
        <div class="modal-content">
            <h3>Cadastrar Aluno (RF01)</h3>
            <p style="font-size: 0.8rem; color: #666; margin-bottom: 15px;">
                Nota: O aluno ser√° cadastrado sem senha (RN04). Uma senha provis√≥ria ser√° gerada pelo sistema.
            </p>
            <form id="formAluno">
                <div class="form-group"><label>Nome Completo*</label><input type="text" id="nomeAluno" required></div>
                <div class="form-group"><label>E-mail Institucional*</label><input type="email" id="emailAluno" required></div>
                <div class="form-row">
                    <div class="form-group"><label>Data Nascimento</label><input type="date" id="nascAluno" required></div>
                    <div class="form-group"><label>Celular</label><input type="text" id="celularAluno" required></div>
                </div>
                <div class="form-group"><label>Curso T√©cnico*</label><input type="text" id="cursoAluno" required></div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancelar" onclick="fecharModal('modalAluno')">Cancelar</button>
                    <button type="submit" class="btn-salvar">Cadastrar Aluno</button>
                </div>
            </form>
        </div>
    </div>

    <script src="./JS/Admin.js" type="module"></script>
</body>
</html>